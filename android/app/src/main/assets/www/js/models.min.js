!function(t){t.baseModel=function(){},t.baseModel.prototype.getContext=function(){}}(gxb.models),function(t){t.registerNamespace("gxb.models.users"),t.registerNamespace("gxb.models.schools"),t.registerNamespace("gxb.models.courses"),t.registerNamespace("gxb.models.profiles"),t.registerNamespace("gxb.models.learning"),t.registerNamespace("gxb.models.founds"),t.registerNamespace("gxb.models.campus"),t.registerNamespace("gxb.models.community"),t.registerNamespace("gxb.models.charging")}(gxb.components),function(t){t.users.authModel=function(t,e,s,i){this.tenantId=t||null,this.no=e||null,this.name=s||null,this.schoolName=i||null},t.inheritFromModel(t.users.authModel)}(gxb.models),function(t){t.users.bindingModel=function(t,e){this.mobile=t||null,this.validateCode=e||null},t.inheritFromModel(t.users.bindingModel)}(gxb.models),function(t){t.users.bindingNoModel=function(t,e,s,i){this.username=t||null,this.password=e||null,this.confirmPassword=s||null,this.userId=i||null},t.inheritFromModel(t.users.bindingNoModel)}(gxb.models),function(t){t.users.forgetModel=function(t,e,s){this.mobile=t||null,this.validateCode=e||null,this.encrypted_password=s||null},t.inheritFromModel(t.users.forgetModel)}(gxb.models),function(t){t.users.jpushinitModel=function(t,e){this.registrationId=t||null,this.imei=e||null},t.inheritFromModel(t.users.jpushinitModel)}(gxb.models),function(t){t.users.loginModel=function(t,e,s,i,l){this.userName=t||null,this.password=e||null,this.schoolName=s||null,this.schoolId=i||null,this.tenantId=l||null},t.inheritFromModel(t.users.loginModel)}(gxb.models),function(t){t.users.loginNoModel=function(t,e){this.userName=t||null,this.password=e||null},t.inheritFromModel(t.users.loginNoModel)}(gxb.models),function(t){t.users.messageidModel=function(t){this.messageId=t||null},t.inheritFromModel(t.users.messageidModel)}(gxb.models),function(t){t.users.regModel=function(t,e,s,i,l){this.mobile=t||null,this.password=e||null,this.code=s||null,this.tenantId=i||null,this.validateCode=l||null},t.inheritFromModel(t.users.regModel)}(gxb.models),function(t){t.profiles.addValidateModel=function(t,e,s){this.no=t||null,this.name=e||null,this.tenantId=s||null},t.inheritFromModel(t.profiles.addValidateModel)}(gxb.models),function(t){t.profiles.authSchoolModel=function(t){this.schoolName=t.schoolName||null,this.tenantId=t.tenantId||null},t.inheritFromModel(t.profiles.authSchoolModel)}(gxb.models),function(t){t.profiles.messageModel=function(t){this.messageId=t.messageId||null,this.isRead=t.isRead||null,this.title=t.title||null,this.detail=t.detail||null,this.time=t.time||null},t.inheritFromModel(t.profiles.messageModel)}(gxb.models),function(t){t.profiles.modifyPasswordModel=function(t,e,s){this.password=t||null,this.newPassword=e||null,this.confirmPassword=s||null},t.inheritFromModel(t.profiles.modifyPasswordModel)}(gxb.models),function(t){t.profiles.modifyPhoneModel=function(t,e,s){this.mobile=t||null,this.validateCode=e||null,this.encrypted_password=s||null},t.inheritFromModel(t.profiles.modifyPhoneModel)}(gxb.models),function(t){t.learning.announcementModel=function(t){this.id=t.id||null,this.title=t.title||null,this.createdAt=gxb.utils.dateUtils.time(t.time)||null;var e=function(t){return t.replace(/<[^>]+>/g,"")};this.content=e(t.detail)||null,this.body=t.body||null},t.inheritFromModel(t.learning.announcementModel)}(gxb.models),function(t){t.learning.assetModel=function(t){this.size=t.size||null,this.title=t.title||null,this.type=t.type||null,this.url=t.url.indexOf("https://gxbfile-gs.gaoxiaobang.com")>-1?t.url.replace("https://gxbfile-gs.gaoxiaobang.com",""):t.url},t.inheritFromModel(t.learning.assetModel)}(gxb.models),function(t){t.learning.forumsModel=function(t){this.forumid=t.forumid||null,this.userId=t.userId||null,this.name=t.name||null,this.des=t.des||null,this.topicsCount=t.topicsCount||null},t.inheritFromModel(t.learning.forumsModel)}(gxb.models),function(t){t.learning.liveVideoModel=function(t){this.webcastId=t.webcastId||null,this.title=t.title||null,this.teacherName=t.teacherName||null,this.startAt=t.startAt||null,this.endAt=t.endAt||null,this.lockOpenAt=t.lockOpenAt||null,this.lockCloseAt=t.lockCloseAt||null,this.cover=t.cover||null,this.cache="./images/course_cover_def.png",this.introduce=t.introduce||null,this.webcastUrl=t.webcastUrl||null,this.playBackUrl=t.playBackUrl||null;var e=new Date(gxb.utils.dateUtils.date(this.endAt));this.duration=this.startAt+"至"+e.getHours()+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes());var s=null==t.lockOpenAt,i=null==t.lockCloseAt;s&&i?this.status="unstart":!s&&i?this.status="living":s||i||(this.status="over")},t.inheritFromModel(t.learning.liveVideoModel)}(gxb.models),function(t){t.learning.materialModel=function(t){switch(this.createdAt=t.createdAt||null,this.title=t.title||null,this.size=t.size?t.size/1024<1e3?(t.size/1024).toFixed(2)+"KB":(t.size/1024/1024).toFixed(2)+"MB":0,this.materialPath=t.materialPath||null,this.fileType=t.materialPath.substr(t.materialPath.lastIndexOf(".")+1).substr(0,3),this.fileType){case"mp4":this.className="mp4";break;case"doc":this.className="doc";break;case"docx":this.className="doc";break;case"xls":this.className="xls";break;case"xlsx":this.className="xls";break;case"ppt":this.className="ppt";break;case"pptx":this.className="ppt";break;case"pdf":this.className="pdf";break;case"txt":this.className="txt";break;case"mp3":this.className="mp3";break;case"jpg":this.className="jpg";break;case"gif":this.className="jpg";break;case"bmp":this.className="jpg";break;case"png":this.className="jpg";break;case"jpeg":this.className="jpg";break;default:this.className=""}},t.inheritFromModel(t.learning.materialModel)}(gxb.models),function(t){t.learning.pageModel=function(t){this.title=t.title,t.body.indexOf("</a>")!=-1?this.body=t.body.replace(/href/g,"hrefs"):this.body=t.body},t.inheritFromModel(t.learning.pageModel)}(gxb.models),function(t){t.learning.submissionModel=function(t){this.quizSubmission=t||null},t.inheritFromModel(t.learning.submissionModel)}(gxb.models),function(t){t.learning.testModel=function(t){this.title=t.title||null,this.unitName=t.unitName||null,this.concludeAt=t.concludeAt||null,this.classId=t.classId||null,this.classPopQuizId=t.classPopQuizId||null,this.publishAt=t.publishAt||null,this.createdAt=t.createdAt||null,this.updatedAt=t.updatedAt||null,this.status=t.status||null},t.inheritFromModel(t.learning.testModel)}(gxb.models),function(t){t.learning.topicModel=function(t){this.topicId=t.topicId||null;var e=function(t){return t.replace(/<[^>]+>/g,"")};this.chapterTitle=t.chapterTitle||null,this.userId=t.userId||null,this.userAvatar_url=t.userAvatar_url||null,this.userName=t.userName||null,this.userType=t.userType||null,this.forumId=t.forumId||null,this.title=t.title||null,this.body=e(t.body)||null,this.createdAt=t.createdAt||null,this.updatedAt=t.updatedAt||null,this.viewCount=t.viewCount||0,this.postsCount=t.postsCount||0;var s=new Date(gxb.utils.dateUtils.date(new Date)).getTime(),i=new Date(gxb.utils.dateUtils.date(t.updatedAt)).getTime(),l=(s-i)/1e3/60/60;l<1?Math.ceil(60*l)<5?this.postedAt="刚刚":this.postedAt=Math.ceil(60*l)+"分钟前":l>1&&l<24?this.postedAt=Math.floor(l)+"小时前":l>24&&(this.postedAt=this.updatedAt)},t.inheritFromModel(t.learning.topicModel)}(gxb.models),function(t){t.learning.videoModel=function(t){t=t||{},this.classId=t.classId||null,this.chapterId=t.chapterId||null,this.video=t.video||{uuid:null,title:null,file:null,srt:null,cover:null},this.time=t.time||0,this.localHost=t.localHost||{},this.isNormal=t.isNormal||!1,this.isPreview=t.isPreview||!1,this.routerType=t.routerType||0,this.curViewTime=t.curViewTime||0,this.maxViewTime=t.maxViewTime||0,this.learnStatus=t.learnStatus||0},t.inheritFromModel(t.learning.videoModel)}(gxb.models),function(t){t.courses.batchDownloadModel=function(t){this.unitId=t.unitId||null,this.unitName=t.title||null,this.classId=t.classId||null,this.className=t.className||null,this.unitIndex=t.unitIndex||null,this.unitShortName=t.title.split(" ")[0],this.status="default",this.unlockedTime=t.unlockedTime||null;var e=new Date(gxb.utils.dateUtils.date(new Date)).getTime()||null,s=new Date(gxb.utils.dateUtils.date(this.unlockedTime)).getTime()||null;this.canOpen=e>=s?"true":"false";var i=gxb.utils.jsonUtils.toObject(window.localStorage.getItem("userObject")).id,l=[],a=[];if(t.itemList)for(var n=0,o=0;o<t.itemList.length;o++){var u=t.itemList[o].itemId,r=t.itemList[o].title,c=t.itemList[o];if(c.chapterList)for(var h=0;h<c.chapterList.length;h++)if("Video"==c.chapterList[h].contentType){n+=1;var d=c.chapterList[h].chapterId,m=c.chapterList[h].title,g={unitId:this.unitId,unitName:this.unitName,uid:i,itemId:u,itemName:r,chapterId:d,chapterName:m,classId:this.classId,className:this.className,chapterIndex:n,unitIndex:this.unitIndex,type:"video"};a.push(parseInt(d)),l.push(g)}}this.unitData=l,this.chapters=a},t.inheritFromModel(t.courses.batchDownloadModel)}(gxb.models),function(t){t.courses.cardModel=function(t){this.id=t.classId||null,this.examNum=t.examNum||null,this.name=t.name||null,this.classIntroduction=t.classIntroduction||null,this.type=t.classType||null,this.image=t.classCover||null,this.progress=t.schedule||null,this.validateType=t.validateType||null,this.credit=t.creditScore?parseInt(t.creditScore).toFixed(1):(0).toFixed(1),this.publishScore=t.publishScore?parseInt(t.publishScore).toFixed(1):null,this.startAt=t.startAt||null,this.concludeAt=t.concludeAt||null,this.types=t.type||null,this.scorePublishDay=t.scorePublishDay||0,this.teacherName=t.teacherName||null;var e=new Date(gxb.utils.dateUtils.date(new Date)).getTime(),s=new Date(gxb.utils.dateUtils.date(this.startAt)).getTime(),i=new Date(gxb.utils.dateUtils.date(this.concludeAt)).getTime();if(e>s&&e<i){var l=(i-e)/1e3/60/60/24;this.statusFlag="1",l<=7&&l>2?this.status=Math.floor(l)+"天后结课":l<2&&l>1?this.status="1天后结课":l<1?this.status="1天内结课":this.status="正在进行"}else if(e<s){var a=(s-e)/1e3/60/60/24;this.statusFlag="2",a<=30&&a>2?this.status=Math.floor(a)+"天后开课":a<2&&a>1?this.status="1天后开课":a<1?this.status="1天内开课":this.status="即将开始"}else if(e>i){var n=(i-e)/1e3/60/60/24;if(n+parseInt(this.scorePublishDay)<=0)this.showScore=!0;else{var o=n+parseInt(this.scorePublishDay);o<1?(this.pubDate=24*o,this.pubDate>1?this.prompt=Math.ceil(this.pubDate)+"小时后公布成绩":this.prompt="1小时后公布成绩"):(this.pubDate=Math.ceil(o),this.prompt=this.pubDate+"天后公布成绩"),this.showScore=!1}this.statusFlag="0",this.status="已结课"}var u=[];if(t.teachers&&t.teachers.length>0)for(var r=0;r<t.teachers.length;r++){var c={};c.teacherName=t.teachers[r].teacherName,u.push(c)}this.teachers=u||null},t.inheritFromModel(t.courses.cardModel)}(gxb.models),function(t){t.courses.chapterListModel=function(t){this.unitId=t.unitId||null,this.title=t.title||null,this.unitIndex=t.unitIndex||null;var e=0;this.unlockedTime=t.unlockedTime||null;var s=new Date(gxb.utils.dateUtils.date(new Date)).getTime(),i=new Date(gxb.utils.dateUtils.date(this.unlockedTime)).getTime();this.canOpen=s>=i?"true":"false";var l=[];if(t.itemList&&t.itemList.length>0)for(var a=0,n=0;n<t.itemList.length;n++){var o={};if(o.itemId=t.itemList[n].itemId||null,o.title=t.itemList[n].title||null,t.itemList[n].chapterList&&t.itemList[n].chapterList.length>0)for(var u=0;u<t.itemList[n].chapterList.length;u++)"2"!=t.itemList[n].chapterList[u].learnStatus&&(this.status="未完成");var r=[];if(t.itemList[n].chapterList&&t.itemList[n].chapterList.length>0){for(var c=0;c<t.itemList[n].chapterList.length;c++){var h={};if("Video"==t.itemList[n].chapterList[c].contentType&&(e++,a+=1,h.chapterIndex=a),h.chapterId=t.itemList[n].chapterList[c].chapterId||null,h.contentId=t.itemList[n].chapterList[c].contentId||null,h.contentType=t.itemList[n].chapterList[c].contentType||null,h.title=t.itemList[n].chapterList[c].title||null,h.process=t.itemList[n].chapterList[c].process||0,h.state=t.itemList[n].chapterList[c].state||"default",h.processStart=h.process*Math.PI*2*7||0,h.processEnd=2*Math.PI*7*(1-h.process)||0,h.learnStatus=t.itemList[n].chapterList[c].learnStatus||"0","Assignment"==h.contentType&&(h.assignment=t.itemList[n].chapterList[c].assignment||null),"WebCast"==h.contentType){h.startAt=t.itemList[n].chapterList[c].webcast.startAt||null,h.endAt=t.itemList[n].chapterList[c].webcast.endAt||null;var d=new Date(gxb.utils.dateUtils.date(new Date)).getTime(),m=new Date(gxb.utils.dateUtils.date(h.startAt)).getTime(),g=new Date(gxb.utils.dateUtils.date(h.endAt)).getTime();d>m&&d<g?(h.webcastStatus="直播中",h.webcastClass="doing"):d<m?(h.webcastStatus="未开始",h.webcastClass="notStarted"):d>g&&(h.webcastStatus="已结束",h.webcastClass="end")}r.push(h)}o.chapterList=r}l.push(o)}this.itemList=l,this.openStatus=1,this.numberOfVideo=e},t.inheritFromModel(t.courses.chapterListModel)}(gxb.models),function(t){t.courses.commentModel=function(t){this.userId=t.id||null,this.name=t.userName||null,this.avatar=t.userImageUrl||null,this.time=t.updatedAt||null,this.content=t.content||null},t.inheritFromModel(t.courses.commentModel)}(gxb.models),function(t){t.courses.courseTeacherModel=function(t){this.name=t.name||null,this.title=t.title||null,this.avatar=t.avatar||null,this.intro=t.intro||null},t.inheritFromModel(t.courses.courseTeacherModel)}(gxb.models),function(t){t.courses.excellentModel=function(t){this.img=t.courseCover||null,this.id=t.classId||null,this.description=t.description||null,this.courseCover=t.courseCover||null,this.startAt=t.startAt||null,this.concludeAt=t.concludeAt||null;var e=new Date(gxb.utils.dateUtils.date(new Date)).getTime(),s=new Date(gxb.utils.dateUtils.date(this.startAt)).getTime(),i=new Date(gxb.utils.dateUtils.date(this.concludeAt)).getTime();e>s&&e<i?this.statusFlag="0":e<s?this.statusFlag="1":e>i&&(this.statusFlag="2"),console.log(this.statusFlag);var l=[];if(t.instructors&&t.instructors.length>0)for(var a=0;a<t.instructors.length;a++){var n={};n.instructorName=t.instructors[a].instructorName,l.push(n)}this.instructors=l||null},t.inheritFromModel(t.courses.excellentModel)}(gxb.models),function(t){t.courses.introModel=function(t){this.classId=t.classId||null,this.classCover=t.classCover||null,this.classSmallCover=t.classSmallCover||null,this.cache="./images/course_cover_def.png",this.name=t.name||null,this.type=t.classType||null,this.examNum=t.examNum||null,this.creditScore=t.creditScore||null,this.enrollment=t.enrollments_count||null,this.learnStatus=t.learnStatus||null,this.schedule=t.schedule||null,this.startAt=t.startAt||null,this.concludeAt=t.concludeAt||null,this.intro=t.classIntroduces||null,this.isCollect=t.isCollect||null,this.canStudy=t.canStudy||null,this.validateType=t.validateType||null,this.teachMode=t.teachMode||null,this.studyStatus=t.studyStatus||0,this.courseId=t.courseId,this.webcastNum=t.webcastNum||0,this.classCover&&(this.classSmallCover=this.classCover.substring(0,this.classCover.lastIndexOf("."))+"_small"+this.classCover.substring(this.classCover.lastIndexOf(".")));var e=new Date(gxb.utils.dateUtils.date(new Date)).getTime(),s=new Date(gxb.utils.dateUtils.date(this.startAt)).getTime(),i=new Date(gxb.utils.dateUtils.date(this.concludeAt)).getTime();if(e>s&&e<i){var l=(i-e)/1e3/60/60/24;l<=7&&l>2?this.status=Math.floor(l)+"天后结课":l<2&&l>1?this.status="1天后结课":l<1?this.status="1天内结课":this.status="正在进行"}else if(e<s){var a=(s-e)/1e3/60/60/24;a<=30&&a>1?this.status=Math.floor(a)+"天后开课":a<2&&a>1?this.status="1天后开课":a<1?this.status="1天内开课":this.status="即将开始"}else e>i&&(this.status="已结课");var n=[];if(t.teachers&&t.teachers.length>0)for(var o=0;o<t.teachers.length;o++){var u={};u.teacherName=t.teachers[o].teacherName,u.avatar=t.teachers[o].avatar,u.title=t.teachers[o].title,n.push(u)}this.teachers=n||null},t.inheritFromModel(t.courses.introModel)}(gxb.models),function(t){t.courses.liveModel=function(t){this.webcastId=t.webcastId||null,this.title=t.title||null,this.teacherName=t.teacherName||null;var e=function(t){return t.replace(/<[^>]+>/g,"")};this.cover="https://gxbfile-gs.gaoxiaobang.com"+t.cover||null,this.introduce=e(t.introduce)||null,this.webcastUrl=t.webcastUrl||null,this.playBackUrl=t.playBackUrl||null,this.liveId=t.liveId,this.startAt=t.startAt||null,this.endAt=t.endAt||null;var s=new Date(gxb.utils.dateUtils.date(new Date)).getTime(),i=new Date(gxb.utils.dateUtils.date(this.startAt)).getTime(),l=new Date(gxb.utils.dateUtils.date(this.endAt)).getTime();s+9e5>i&&s<l?(this.statusText="直播",this.canPlay=1):s+9e5<i?(this.statusText="等待",this.canPlay=2):s>l&&(this.canPlay=0,this.statusText="回放")},t.inheritFromModel(t.courses.liveModel)}(gxb.models),function(t){t.courses.noticeModel=function(t){this.id=t.id,this.title=t.title;var e=t.desc;e.indexOf("</a>")!=-1?this.desc=e.replace(/href/g,"hrefs"):this.desc=t.desc},t.inheritFromModel(t.courses.noticeModel)}(gxb.models),function(t){t.courses.resourceModel=function(t){switch(this.createdAt=t.createdAt||null,this.title=t.title||null,this.name=t.name||null,this.updatedAt=t.updatedAt||null,this.size=t.size/1024<1e3?(t.size/1024).toFixed(2)+"KB":(t.size/1024/1024).toFixed(2)+"MB",this.filePath=t.filePath||null,this.fileType=t.filePath.substr(t.filePath.lastIndexOf(".")+1).substr(0,3),this.fileType){case"mp4":this.className="mp4";break;case"doc":this.className="doc";break;case"docx":this.className="doc";break;case"xls":this.className="xls";break;case"xlsx":this.className="xls";break;case"ppt":this.className="ppt";break;case"pptx":this.className="ppt";break;case"pdf":this.className="pdf";break;case"txt":this.className="txt";break;case"mp3":this.className="mp3";break;case"jpg":this.className="jpg";break;case"gif":this.className="jpg";break;case"bmp":this.className="jpg";break;case"png":this.className="jpg";break;case"jpeg":this.className="jpg";break;default:this.className=""}},t.inheritFromModel(t.courses.resourceModel)}(gxb.models),function(t){t.schools.schoolModel=function(t){this.name=t.name,this.schoolId=t.schoolId,this.tenantId=t.tenantId,this.entryLevel=t.entryLevel},t.inheritFromModel(t.schools.schoolModel)}(gxb.models),function(t){t.founds.foundModel=function(t){this.categoryId=t.categoryId||null,this.categoryName=t.categoryName||null},t.inheritFromModel(t.founds.foundModel)}(gxb.models),function(t){t.founds.foundViewModel=function(t){this.courseCover=t.courseCover||null,this.className=t.className||null,this.playTimes=t.playTimes||null,this.classId=t.classId||null,this.microClassWatchNum=t.microClassWatchNum||0},t.inheritFromModel(t.founds.foundViewModel)}(gxb.models),function(t){t.charging.chargingArticleModel=function(t){this.title=t.title||null,this.author=t.author||null,this.desc=t.desc||null,this.categoryId=t.categoryId||null,this.articleId=t.articleId||0,this.cover=gxb.settings.cdn.wangsu.getDomains().defaultBucketDomain+t.cover||null},t.inheritFromModel(t.charging.chargingArticleModel)}(gxb.models),function(t){t.community.chatModel=function(t){this.userId=t.userId||null,this.lastMessage=t.lastMessage||null,this.nickName=t.nickName||null,this.lastName=t.nickName.substring(t.nickName.length-2,t.nickName.length),parseInt(t.unreadCount)>99?this.unreadCount="99+":this.unreadCount=t.unreadCount||null,this.timeS=t.timeS;var e=t.userId.substring(t.userId.length-1,t.userId.length).charCodeAt(0).toString(),s=e.charAt(e.length-1);this.className="userBg_"+s,this.avatarUrl=t.avatarUrl||null},t.inheritFromModel(t.community.chatModel)}(gxb.models),function(t){var e=t.utils,s=t.models,i="gxb.models",l="",a=[],n=function(t,i){e.objectUtils.isObjectOnly(t)||(t=a.pop()),a.length&&e.objectUtils.getKeys(t,function(t,l){var o=i+"."+l;e.objectUtils.isObjectOnly(t)?(a.push(t),n(t,o)):e.langUtils.isFunction(t)&&s.registerModel(o)})};e.objectUtils.getKeys(s,function(t,s){e.objectUtils.isObjectOnly(t)&&(l=i+"."+s,a.push(t),n(t,l))})}(gxb);